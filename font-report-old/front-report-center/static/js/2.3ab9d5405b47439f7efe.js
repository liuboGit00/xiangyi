webpackJsonp([2],{"/fv6":function(e,t){},"5b5o":function(e,t,a){"use strict";var o=a("woOf"),s=a.n(o),r=a("nkcX"),i=a("nOsQ"),l={props:["dialogOpt"],mounted:function(){this.getReportorganize()},data:function(){return{form:{reportTitle:"",remark:"",usefulTime1:"",usefulTime2:"",urgentType:"3",allowTwice:"1"},rules2:{reportTitle:[{validator:function(e,t,a){""===t||void 0===t?a(new Error("输入内容不能为空")):a()},trigger:"blur"}]},defaultProps:{children:"children",label:"label"},dataleft:[],dataright:[],serverobject:i.a}},computed:{dialogobj:function(){return s()(this.dialogOpt)}},components:{Dialogcomponent:r.a},methods:{submitForm:function(e,t,a){var o=this;this.$refs[e].validate(function(e){if(!e)return!1;o.$emit("handlesure-dialog",t,a,o.form)})},resetForm:function(e){this.$refs[e].resetFields()},getReportorganize:function(){var e=this;e.serverobject.reportorganize("",function(t){(t.data.status="SUCCESS")&&(e.dataleft=t.data.data,e.dataleft=e.transData(e.dataleft,"orgId","orgName","orgSupId","children"))})},getCheckedNodesLeft:function(){var e=!1,t=[],a=this.$refs.trees.getCheckedNodes();this.dataright.forEach(function(o,s){e=!1,a.forEach(function(t,a){o.id==t.id&&(e=!0)}),e||t.push(o)}),this.dataright=t},getCheckedNodesRight:function(){var e=[];this.$refs.tree.getCheckedNodes().forEach(function(t,a){t.hasOwnProperty("children")||e.push(t)}),this.dataright.forEach(function(t,a){e.forEach(function(a,o){t.id==a.id&&e.splice(o,1)})}),this.dataright=this.dataright.concat(e)},dialogHandlesure:function(e,t){for(var a in this.form)""==this.form[a]&&delete this.form[a];switch(e){case"保存":this.submitForm("ruleForm2",e,t);break;case"发布":this.form.receiveUserId=this.dataright,this.$emit("handlesure-dialog",e,t,this.form)}this.form={reportTitle:"",remark:"",usefulTime1:"",usefulTime2:"",urgentType:"3",allowTwice:"1"},this.dataright=[]},dialogHandle:function(e,t){this.form={reportTitle:"",remark:"",usefulTime1:"",usefulTime2:"",urgentType:"3",allowTwice:"1"},this.dataright=[],this.$emit("handlecancle-dialog",e,t)},transData:function(e,t,a,o,s){for(var r=[],i={},l=t,n=a,d=o,c=s,u=0,p=0,m=0,h=e.length,f=[];m<h;m++){var g={id:e[m][l],label:e[m][n],orgSupId:e[m][d]};f[m]=g}for(;u<h;u++)i[f[u].id]=f[u];for(;p<h;p++){var v=f[p],C=i[v[d]];C?(!C[c]&&(C[c]=[]),C[c].push(v),C.disabled=!0):r.push(v)}return r},setDataToTree:function(e,t,a){if(e)for(var o=0;o<e.length;o++){var s=e[o];if(s.id==t)return this.$set(e[o],"children",[]),void(e[o].children=e[o].children.concat(a));this.setDataToTree(s.children,t,a)}},handleCheckChange:function(e,t,a){var o=this;if(!e.lastchild&&(!e.children||e.children.length<=0)){var s=e.id;i.a.reportorganizechild(s,function(t){(t.data.status="SUCCESS")&&(t.data.data=o.transData(t.data.data,"userId","userName","aliasName","children"),t.data.data.forEach(function(e,t){e.lastchild=!0}),o.setDataToTree(o.dataleft,e.id,t.data.data))})}}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("Dialogcomponent",{attrs:{dialogobj:e.dialogobj},on:{"dialog-cancle":e.dialogHandle,"dialog-sure":e.dialogHandlesure}},["发布"==e.dialogobj.title?a("div",[a("div",{staticClass:"treetransfer"},[a("el-tree",{ref:"tree",attrs:{data:e.dataleft,props:e.defaultProps,"show-checkbox":"","node-key":"id"},on:{"check-change":e.handleCheckChange}}),e._v(" "),a("div",{staticClass:"handle"},[a("span",{staticClass:"el-icon-arrow-left",on:{click:e.getCheckedNodesLeft}}),e._v(" "),a("span",{staticClass:"el-icon-arrow-right",on:{click:e.getCheckedNodesRight}})]),e._v(" "),a("el-tree",{ref:"trees",attrs:{data:e.dataright,props:e.defaultProps,"node-key":"id","show-checkbox":""},on:{"check-change":e.handleCheckChange}})],1),e._v(" "),a("el-form",{ref:"form",staticClass:"formpublic",attrs:{model:e.form,"label-width":""}},[a("el-form-item",{attrs:{label:"是否允许二次转发"}},[a("el-radio-group",{model:{value:e.form.allowTwice,callback:function(t){e.$set(e.form,"allowTwice",t)},expression:"form.allowTwice"}},[a("el-radio",{attrs:{label:"0"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"紧急程度"}},[a("el-radio-group",{model:{value:e.form.urgentType,callback:function(t){e.$set(e.form,"urgentType",t)},expression:"form.urgentType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("加急")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("紧急")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("正常")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期限"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.form.usefulTime,callback:function(t){e.$set(e.form,"usefulTime",t)},expression:"form.usefulTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1):e._e(),e._v(" "),"保存"==e.dialogobj.title?a("div",[a("el-form",{ref:"ruleForm2",attrs:{model:e.form,rules:e.rules2}},[a("el-form-item",{attrs:{label:"请输入保存后的标题",prop:"reportTitle"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.reportTitle,callback:function(t){e.$set(e.form,"reportTitle",t)},expression:"form.reportTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1):e._e()])],1)},staticRenderFns:[]};var d=a("VU/8")(l,n,!1,function(e){a("/fv6")},"data-v-63d08582",null);t.a=d.exports},IerA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("vhUd"),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"emptyformgroup"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.preview}},[e._v("预览")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.savetemplate}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.publics}},[e._v("发布")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.suspendflag,expression:"suspendflag"}],staticClass:"topsuspend"},[a("div",{staticClass:"childsuspend"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.choicesuspend("media")}}},[e._v("媒体"),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.mediashowflag,expression:"mediashowflag"}],staticClass:"tooltip"},[a("el-tabs",{attrs:{stretch:"true"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"图片",name:"first"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.actions,"file-list":e.fileList,accept:".gif,.jpg,.bmp,.png,.jpeg","on-success":e.successfulupload,limit:1,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")])],1)],1)],1),e._v(" "),a("div",{staticClass:"filter-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:e.savebtn}},[e._v("取消")])],1)],1)],1),e._v(" "),a("div",{staticClass:"childsuspend"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.choicesuspend("graphe")}}},[e._v("图表"),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.grapheshowflag,expression:"grapheshowflag"}],staticClass:"tooltip"},[a("el-tabs",{attrs:{stretch:"true"},on:{"tab-click":e.handleClick},model:{value:e.activeNametwo,callback:function(t){e.activeNametwo=t},expression:"activeNametwo"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分组表",name:"first2"}},[a("div",{staticClass:"box"},e._l(e.itemsform,function(t,o){return a("el-button",{key:o,attrs:{type:"primary",size:"small"},on:{click:function(a){e.successreportform(t)}}},[a("span",{staticClass:"form-name",attrs:{title:t.reportFormsTitle}},[e._v(e._s(t.reportFormsTitle))])])}))]),e._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"垂直柱状图",name:"second2"}},[a("div",{staticClass:"box"},e._l(e.itemsform,function(t,o){return a("el-button",{key:o,attrs:{type:"primary",size:"small"},on:{click:function(a){e.successreportform(t)}}},[a("span",{staticClass:"form-name",attrs:{title:t.reportFormsTitle}},[e._v(e._s(t.reportFormsTitle))])])}))]),e._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"水平柱状图",name:"third2"}},[a("div",{staticClass:"box"},e._l(e.itemsform,function(t,o){return a("el-button",{key:o,attrs:{type:"primary",size:"small"},on:{click:function(a){e.successreportform(t)}}},[a("span",{staticClass:"form-name",attrs:{title:t.reportFormsTitle}},[e._v(e._s(t.reportFormsTitle))])])}))]),e._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"折线图",name:"four2"}},[a("div",{staticClass:"box"},e._l(e.itemsform,function(t,o){return a("el-button",{key:o,attrs:{type:"primary",size:"small"},on:{click:function(a){e.successreportform(t)}}},[a("span",{staticClass:"form-name",attrs:{title:t.reportFormsTitle}},[e._v(e._s(t.reportFormsTitle))])])}))]),e._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"饼图",name:"five2"}},[a("div",{staticClass:"box"},e._l(e.itemsform,function(t,o){return a("el-button",{key:o,attrs:{type:"primary",size:"small"},on:{click:function(a){e.successreportform(t)}}},[a("span",{staticClass:"form-name",attrs:{title:t.reportFormsTitle}},[e._v(e._s(t.reportFormsTitle))])])}))])],1),e._v(" "),a("div",{staticClass:"filter-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:e.savebtn}},[e._v("取消")])],1)],1)],1),e._v(" "),a("div",{staticClass:"childsuspend"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.choicesuspend("theme")}}},[e._v("主题"),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.themeshowflag,expression:"themeshowflag"}],staticClass:"tooltip"},[a("div",{staticClass:"filter"},[a("div",[a("label",{staticStyle:{color:"black"}},[e._v("主题分类")]),e._v(" "),a("el-select",{attrs:{placeholder:"主题分类"},on:{change:e.themechange},model:{value:e.themevalue,callback:function(t){e.themevalue=t},expression:"themevalue"}},e._l(e.reportthemelist,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticClass:"filter-btn clearfix"},[a("div",{staticClass:"box"},e._l(e.formthemelist,function(t,o){return a("el-button",{key:o,attrs:{type:"primary"},on:{click:function(a){e.successtheme(t,o)}}},[e._v(e._s(t.reportFormsTitle))])}))]),e._v(" "),a("div",{staticClass:"filter-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:e.savebtn}},[e._v("取消")])],1)])],1)])],1),e._v(" "),a("div",{staticClass:"dashboardtemplate"},[a("div",{staticClass:"contents"},e._l(e.items,function(t,o){return a("div",{key:o,staticClass:"lists templatelist",style:{width:t.basewidth,height:t.baseheight}},[a("div",{staticClass:"header"},[a("span",{style:{background:t.bgcolor}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.header,expression:"item.header"}],attrs:{type:"text",id:t.headerid},domProps:{value:t.header},on:{change:function(a){e.addtextcontent(t)},input:function(a){a.target.composing||e.$set(t,"header",a.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.info,expression:"item.info"}],attrs:{type:"text",id:t.Infoid},domProps:{value:t.info},on:{change:function(a){e.addtextcontent(t)},input:function(a){a.target.composing||e.$set(t,"info",a.target.value)}}})]),e._v(" "),a("div",{staticClass:"graphe",attrs:{id:t.Graphid},on:{mouseenter:function(a){e.entergraphe(t)},mouseleave:function(a){e.leavegraphe(t)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.addGraphflag,expression:"item.addGraphflag"}],staticClass:"addcen el-icon-circle-plus",on:{click:function(a){e.addgraphe(t.Graphid,o)}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.deleteflag,expression:"item.deleteflag"}],staticClass:"delete iconfont icon-shanchu",on:{click:function(a){e.deletegraphe(t)}}}),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:t.imgflag,expression:"item.imgflag"}],attrs:{width:"100%",height:"100%",src:t.src,alt:""}}),e._v(" "),t.textflag?a("span",{staticClass:"formcontent"},[e._v(e._s(t.reportFormsTitle))]):e._e()]),e._v(" "),a("div",{staticClass:"footer"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"item.description"}],attrs:{id:t.descriptionid},domProps:{value:t.description},on:{change:function(a){e.addtextcontent(t)},input:function(a){a.target.composing||e.$set(t,"description",a.target.value)}}}),e._v(" "),a("div",{staticClass:"scrollby"},[a("span",{ref:"prev",refInFor:!0,staticClass:"el-icon-arrow-up",on:{click:e.scrollpage}}),e._v(" "),a("span",{ref:"next",refInFor:!0,staticClass:"el-icon-arrow-down",on:{click:e.scrollpage}})])])])}))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.suspendflag,expression:"suspendflag"}],staticClass:"addelement",on:{click:e.hidesuspend}}),e._v(" "),a("Dialog",{attrs:{dialogOpt:e.dialogOpt},on:{"handlecancle-dialog":e.selectDialog,"handlesure-dialog":e.submitDialog}})],1)},staticRenderFns:[]};var r=function(e){a("MFz7")},i=a("VU/8")(o.a,s,!1,r,"data-v-6f77a08b",null);t.default=i.exports},MFz7:function(e,t){},vhUd:function(e,t,a){"use strict";(function(e){var o=a("woOf"),s=a.n(o),r=a("mvHQ"),i=a.n(r),l=a("5b5o"),n=a("nOsQ");t.a={mounted:function(){this.$route.query.reportId?(this.ajaxshow(),this.ajaxshowecho()):this.ajaxshow()},data:function(){return{reportthemelist:[],themevalue:"",formthemelist:[],report:{reportTitle:"",reportId:""},publicsagainflag:!1,publicsflag:!1,templateId:this.$route.query.templateId,serverobject:n.a,suspendflag:!1,dialogOpt:{dialogflag:!1,width:"536px",disabled:!1},form:{region:""},action:window.localStorage.getItem("baseURL"),imgBaseURL:window.localStorage.getItem("imgBaseURL"),fileList:[],itemsform:[],moduleCode:"",moduleCodeindex:"",activeName:"first",activeNametwo:"first2",backgroundColor:["linear-gradient(to top, #6a89d9,#4c65a4)","linear-gradient(to top, #f56986,#c77081)","linear-gradient(to top, #86e6d8,#59ada1)","linear-gradient(to top, #56aea1,#50a194)"],items:[],formsliststore:[],echomodulecode:[],mediashowflag:!1,themeshowflag:!1,grapheshowflag:!1}},computed:{actions:function(){return this.action+"upload/image"}},components:{Dialog:l.a},methods:{deletegraphe:function(e){e.src="",e.imgflag=!1,e.deleteflag=!1,e.addGraphflag=!0,e.textflag=!1,e.reportFormsTitle=""},leavegraphe:function(e){e.deleteflag=!1},entergraphe:function(e){(e.textflag||e.imgflag)&&(e.deleteflag=!0)},hidesuspend:function(){this.suspendflag=!1,this.activeNametwo="first2",this.successforms("1")},successreportform:function(e,t){this.formsliststore.push({dataType:1,moduleCode:this.moduleCode,obj:e}),this.suspendflag=!1,this.itemsform=[],this.addgraphecontent(e,1)},queryreporttheme:function(){var e=this;n.a.reportformstheme("",function(t){(t.data.status="SUCCESS")&&(e.reportthemelist=[],t.data.data.list.forEach(function(t,a){e.reportthemelist.push({value:String(t.themeId),label:t.themeName})}))})},successtheme:function(e,t){this.formsliststore.push({dataType:1,moduleCode:this.moduleCode,obj:e}),this.suspendflag=!1,this.formthemelist=[],this.addgraphecontent(e,1)},themechange:function(){var e=this,t={themeId:this.themevalue};n.a.reportforms(t,function(t){"SUCCESS"==t.data.status&&(e.formthemelist=t.data.data.list)})},successforms:function(t){var a=this,o={formsType:t};n.a.reportforms(o,function(o){(o.data.status="SUCCESS")&&(e("#reportform_"+t).css({display:"none"}),a.itemsform=o.data.data.list)})},addgraphecontent:function(e,t){3==t&&(this.items[this.moduleCodeindex].src=e,this.items[this.moduleCodeindex].imgflag=!0),1==t&&(this.items[this.moduleCodeindex].reportFormsTitle=e.reportFormsTitle,this.items[this.moduleCodeindex].textflag=!0,this.items[this.moduleCodeindex].reportFormsCode=e.reportFormsCode,this.items[this.moduleCodeindex].imgflag=!1),2==t&&(this.items[this.moduleCodeindex].reportFormsTitle=e.reportFormsTitle,this.items[this.moduleCodeindex].textflag=!0,this.items[this.moduleCodeindex].imgflag=!1),this.items[this.moduleCodeindex].addGraphflag=!1,this.items[this.moduleCodeindex].dataType=t},successfulupload:function(e,t,a){"SUCCESS"==e.status&&(this.formsliststore.push({dataType:3,moduleCode:this.moduleCode,obj:this.imgBaseURL+e.data.fileName}),this.suspendflag=!1,this.fileList=[],this.addgraphecontent(this.imgBaseURL+e.data.fileName,3))},submitUpload:function(){this.$refs.upload.submit()},scrollpage:function(e){"el-icon-arrow-up"==e.target.className?e.target.parentElement.previousElementSibling.scrollBy(0,-10):e.target.parentElement.previousElementSibling.scrollBy(0,10)},preview:function(){localStorage.setItem("formsliststore",i()(this.formsliststore)),localStorage.setItem("items",i()(this.items)),window.open("#/reportpreview","_blank")},savetheme:function(){this.suspendflag=!1},savebtn:function(){e(".tooltip").hide()},choicesuspend:function(e){this.mediashowflag=!1,this.themeshowflag=!1,this.grapheshowflag=!1,"theme"==e&&(this.themeshowflag=!0),"graphe"==e&&(this.grapheshowflag=!0),"media"==e&&(this.mediashowflag=!0),this.queryreporttheme(),this.activeNametwo="first2",this.successforms("1")},handleClick:function(e,t){switch(this.itemsform=[],e.label){case"分组表":this.successforms("1");break;case"垂直柱状图":this.successforms("2");break;case"水平柱状图":this.successforms("3");break;case"折线图":this.successforms("4");break;case"饼图":this.successforms("5")}},addgraphe:function(e,t){this.suspendflag=!0,this.moduleCode=e,this.moduleCodeindex=t},addtextcontent:function(e){this.formsliststore.push({dataType:"2",obj:e})},ajaxshowecho:function(){var e=this,t=e.$route.query.reportId;e.serverobject.reportmodulesearch(t,function(t){(t.data.status="SUCCESS")&&(e.echomodulecode=t.data.data,t.data.data.forEach(function(t,a){e.items.forEach(function(a,o){1==t.dataType&&a.Graphid==t.moduleCode&&(a.reportFormsTitle=t.dataContent,a.textflag=!0,a.reportFormsCode=t.reportFormsCode,a.imgflag=!1,a.addGraphflag=!1,a.dataType=1,e.formsliststore.push({dataType:"1",moduleCode:t.moduleCode,obj:t})),2==t.dataType&&(a.headerid==t.moduleCode&&(a.header=t.dataContent,e.formsliststore.push({dataType:"2",obj:t})),a.Infoid==t.moduleCode&&(a.info=t.dataContent,e.formsliststore.push({dataType:"2",obj:t})),a.descriptionid==t.moduleCode&&(a.description=t.dataContent,e.formsliststore.push({dataType:"2",obj:t}))),3==t.dataType&&a.Graphid==t.moduleCode&&(a.imgflag=!0,a.src=e.imgBaseURL+t.dataContent,a.addGraphflag=!1,a.dataType=3,e.formsliststore.push({dataType:"3",moduleCode:t.moduleCode,obj:e.imgBaseURL+t.dataContent}))})}))})},ajaxshow:function(e){for(var t=0,a=1,o=2,s="auto",r="auto",i=0;i<9;i++){var l=i+1,n=this.backgroundColor,d="";t==i&&(d=n[0],t+=3),a==i&&(d=n[1],a+=3),o==i&&(d=n[2],o+=3),s="3.5rem",r="calc(3.5rem - 100px)",i>5&&(s="100%",r="3.5rem"),i>6&&(s="5.28rem",r="5.28rem"),this.items.push({header:"",info:"",src:"",description:"",bgcolor:d,basewidth:s,baseheight:r,deleteflag:!1,addGraphflag:!0,imgflag:!1,textflag:!1,Graphid:"regionReportGraph_0"+l,Infoid:"regionReportInfo_0"+l,descriptionid:"regionReportdescri_0"+l,headerid:"regionReportHeader_0"+l,reportFormsTitle:"",dataType:null,reportFormsCode:""})}},selectDialog:function(e,t){t?(this.dialogOpt.dialogflag=!1,self.publicsagainflag=!1):this.dialogOpt={dialogflag:!0,width:"536px",disabled:!1,title:e}},submitDialog:function(e,t,a){var o=this;if(o.dialogOpt.dialogflag=!1,o.dialogOpt.disabled=!0,a.templateId=o.templateId,o.publicsagainflag){if(0==a.receiveUserId.length)return void this.$message({message:"用户选择不能为空",type:"warning"});var r=[];a.receiveUserId.forEach(function(e){r.push({reportId:o.report.reportId,allowTwice:a.allowTwice,urgentType:a.urgentType,usefulTime:a.usefulTime,remark:a.remark,reportTitle:o.report.reportTitle,receiveUserId:e.id,receiveUserName:e.label})}),n.a.reportpublish(r,function(e){(e.data.status="SUCCESS")&&(o.dialogOpt.dialogflag=!1,o.dialogOpt.disabled=!1,o.publicsagainflag=!1,o.$router.push({path:"/reportpublic"}))})}else{o.report.reportTitle=a.reportTitle;var i={report:a},l={reportModules:[]};o.items.forEach(function(e,t){l.reportModules.push({moduleCode:e.headerid,dataType:e.header?2:null,dataContent:e.header}),l.reportModules.push({moduleCode:e.Infoid,dataType:e.info?2:null,dataContent:e.info}),l.reportModules.push({moduleCode:e.descriptionid,dataType:e.description?2:null,dataContent:e.description}),1==e.dataType?l.reportModules.push({moduleCode:e.Graphid,dataType:1,dataContent:e.reportFormsTitle,reportFormsCode:e.reportFormsCode}):2==e.dataType?l.reportModules.push({moduleCode:e.Graphid,dataType:2,dataContent:e.reportFormsTitle}):3==e.dataType?l.reportModules.push({moduleCode:e.Graphid,dataType:3,dataContent:e.src.substr(e.src.lastIndexOf("/")+1)}):l.reportModules.push({moduleCode:e.Graphid,dataType:null,dataContent:e.src.substr(e.src.lastIndexOf("/")+1)})});var d=s()(l,i);n.a.reportsave(d,function(e){(e.data.status="SUCCESS")&&(o.dialogOpt.dialogflag=!1,o.dialogOpt.disabled=!1,o.publicsflag?(o.selectDialog("发布"),o.publicsagainflag=!0,o.report.reportId=e.data.data.reportId):o.$router.push({path:"/reportwatch"}))})}},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},share:function(){this.selectDialog("发布")},savetemplate:function(){var t=this,a=e(".dashboardtemplate").clone().html();if(localStorage.setItem("reportshare",a),localStorage.setItem("items",i()(this.items)),this.$route.query.reportId){var o={reportModules:[]};t.items.forEach(function(e,a){t.echomodulecode.forEach(function(t){e.headerid==t.moduleCode&&o.reportModules.push({reportModuleId:t.reportModuleId,dataType:e.header?2:null,dataContent:e.header}),e.Infoid==t.moduleCode&&o.reportModules.push({reportModuleId:t.reportModuleId,dataType:e.info?2:null,dataContent:e.info}),e.descriptionid==t.moduleCode&&o.reportModules.push({reportModuleId:t.reportModuleId,dataType:e.description?2:null,dataContent:e.description}),e.Graphid==t.moduleCode&&(1==e.dataType?o.reportModules.push({reportModuleId:t.reportModuleId,dataType:1,dataContent:e.reportFormsTitle,reportFormsCode:e.reportFormsCode}):2==e.dataType?o.reportModules.push({reportModuleId:t.reportModuleId,dataType:2,dataContent:e.reportFormsTitle}):3==e.dataType?o.reportModules.push({reportModuleId:t.reportModuleId,dataType:3,dataContent:e.src.substr(e.src.lastIndexOf("/")+1)}):o.reportModules.push({reportModuleId:t.reportModuleId,dataType:null,dataContent:e.src.substr(e.src.lastIndexOf("/")+1)}))})}),n.a.reportupdate(o.reportModules,function(e){(e.data.status="SUCCESS")&&t.$router.push({path:"/reportwatch"})})}else this.selectDialog("保存")},publics:function(){var t=e(".dashboardtemplate").clone().html();localStorage.setItem("reportshare",t),localStorage.setItem("items",i()(this.items)),this.publicsflag=!0,this.publicsagainflag=!1,this.selectDialog("保存")}}}}).call(t,a("7t+N"))}});
//# sourceMappingURL=2.3ab9d5405b47439f7efe.js.map