webpackJsonp([7],{FT0Y:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("BO1k"),n=e.n(i),s=e("Havv"),o={props:["load"],data:function(){return{formInline:{user:"",region:""},uploadTitle:"",title:"",checkList:[],totalAll:0,medicalInfoData:[],menu:[],menuList:[],edit:!1,submit:!1,back:!1,delData:!1,sendBack:!1,past:!1,returned:[],pageShow:!0,newLoad:""}},created:function(){var a=JSON.parse(sessionStorage.getItem("leftList"));3===a.length?(this.uploadTitle="提交上传",this.title="样本提交"):(this.uploadTitle=a[0].name.slice(2)+"上传",this.title=a[0].name),this.axiosGet("/medical-imaging-collect/permission-package","menuList"),this.pages(1)},mounted:function(){this.axiosGet("/medical-imaging-collect/organ","apparatusList")},watch:{returned:function(){this.returned.length;for(var a in this.returned)for(var t in this.medicalInfoData)this.returned[a].id==this.medicalInfoData[t].medicalId&&(this.medicalInfoData[t].sendBack=!0,this.medicalInfoData[t].examineData=this.returned[a].examineData)},load:function(){this.newLoad=this.load,""!=this.newLoad&&this.pages(1)}},methods:{axiosGet:function(a,t){var e=this,i=this;s.a.get(a).then(function(a){if("0"==a.data.infoCode)if("apparatusList"==t)i.$data[t]=a.data.data;else if("medicalInfoData"==t){if(i.medicalInfoData=[],"0"==a.data.data.list.length)return void(i.pageShow=!1);i.totalAll=a.data.data.total;var s=!0,o=!1,l=void 0;try{for(var c,d=n()(a.data.data.list);!(s=(c=d.next()).done);s=!0){var r=c.value;i.medicalInfoData.push({diagnosticClassificationName:r.diagnosticClassificationName,doctorName:r.doctorName,entryTime:r.entryTime.split("T")[0],equipmentName:r.equipmentName,equipmentType:r.equipmentType,medicalId:r.medicalId,organId:r.organId,organName:r.organName,subjectClassificationName:r.subjectClassificationName,src:r.organPhoto,sendBack:!1,examineData:"",status:r.status})}}catch(a){o=!0,l=a}finally{try{!s&&d.return&&d.return()}finally{if(o)throw l}}i.sendback(a.data.data.list)}else if("menuList"==t){if(i.menuList=a.data.data,a.data.data.length>0){var m=!0,u=!1,p=void 0;try{for(var f,h=n()(a.data.data);!(m=(f=h.next()).done);m=!0){var v=f.value;"编辑"==v.name?i.edit=!0:"查看"==v.name?i.submit=!0:"退回"==v.name?i.back=!0:"删除"==v.name?i.delData=!0:"被退回"==v.name?i.sendBack=!0:"处理历史"==v.name&&(i.past=!0)}}catch(a){u=!0,p=a}finally{try{!m&&h.return&&h.return()}finally{if(u)throw p}}}}else"returned"==t?a.data.data&&i.returned.push({examineData:a.data.data.examineData,id:a.data.data.medicalId}):"historical"==t&&e.$emit("showType",3,a.data.data);else"1"==a.data.infoCode&&"请求异常：用户不存在，请登录"==a.data.info&&i.$router.push({path:"/login"})})},historical:function(a){this.axiosGet("/medical-imaging-collect/medical-info-examine-approve/"+a,"historical")},upload:function(){console.log(this.checkList);var a=[],t=this,e=[];for(var i in this.checkList)for(var s in this.medicalInfoData)this.checkList[i]==this.medicalInfoData[s].medicalId&&e.push(this.medicalInfoData[s]);var o=!0,l=!1,c=void 0;try{for(var d,r=n()(e);!(o=(d=r.next()).done);o=!0){var m=d.value;a.push({medicalId:m.medicalId,status:m.status,examineData:m.examineData,commitFlag:1})}}catch(a){l=!0,c=a}finally{try{!o&&r.return&&r.return()}finally{if(l)throw c}}0!=a.length?this.axios.post("/medical-imaging-collect/medical-info-examine-approve",a).then(function(a){"0"==a.data.infoCode?(t.$message({message:a.data.info,type:"success"}),t.pages(1)):t.$message({message:a.data.info,type:"warning"})}):this.$message({message:"上传信息为空！请选择上传信息",type:"warning"})},sendback:function(a){if(0!=a.length)for(var t in a)this.axiosGet("/medical-imaging-collect/medical-info-examine-approve/findMedicInfo?medicalId="+a[t].medicalId+"&status="+a[t].status,"returned")},onEdit:function(a,t,e){console.log(t,e),sessionStorage.setItem("apparatus",e),sessionStorage.setItem("apparatusName",t),this.$router.push({path:"/patient-newForm",query:{id:a}})},del:function(a){var t=this,e=this;this.$confirm("此操作将删除该样本, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete("/medical-imaging-collect/receiving-entity?medicalInfoId="+a,"del").then(function(a){"0"==a.data.infoCode?e.$message({message:a.data.info,type:"success"}):e.$message({message:a.data.info,type:"warning"}),e.pages(1)})}).catch(function(){})},onSubmit:function(a){this.$router.push({path:"/CreateAsample-toView",query:{medicalId:a}})},onSubmitSearch:function(){},audit:function(a){console.log(a),this.$emit("showType",1,a)},pages:function(a){this.axiosGet("/medical-imaging-collect/medicalInfoView/approve?pageNum="+a+"&pageSize=5","medicalInfoData")},onBack:function(a,t){console.log(a,t),this.$emit("showType",2,a,t)},look:function(a){console.log(a)}}},l={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"page"},[e("el-breadcrumb",{staticClass:"branch",attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",[a._v(a._s(a.title))]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.upload}},[a._v(a._s(a.uploadTitle))])],1),a._v(" "),a._l(a.medicalInfoData,function(t,i){return e("div",{key:i,staticClass:"search-list"},[e("div",{staticClass:"content-list"},[e("div",{staticClass:"left"},[e("div",{staticClass:"left"},[e("el-checkbox-group",{model:{value:a.checkList,callback:function(t){a.checkList=t},expression:"checkList"}},[e("el-checkbox",{key:t.medicalId,attrs:{label:t.medicalId,value:"item.medicalId"}})],1),a._v(" "),e("span",{staticClass:"time"},[a._v(a._s(t.entryTime))])],1)])]),a._v(" "),e("div",{staticClass:"content-table"},[e("div",{staticClass:"table-img"},[e("img",{attrs:{src:t.src,alt:""}})]),a._v(" "),e("div",{staticClass:"table-flex"},[e("div",{staticClass:"table-list table-one"},[e("ul",[e("li",[e("span",[a._v("检查部位 ：")]),e("span",[a._v(a._s(t.organName))])]),a._v(" "),e("li",[e("span",[a._v("仪器设备 ：")]),e("span",[a._v(a._s(t.equipmentName))])])])]),a._v(" "),e("div",{staticClass:"table-list table-two"},[e("ul",[e("li",[e("span",[a._v("临床诊断 ：")]),e("span",[a._v(a._s(t.diagnosticClassificationName))])]),a._v(" "),e("li",[e("span",[a._v("设备类型 ：")]),e("span",[a._v(a._s(t.equipmentType))])])])]),a._v(" "),e("div",{staticClass:"table-list table-three"},[e("ul",[e("li",[e("span",[a._v("学科编码 ：")]),e("span",[a._v(a._s(t.subjectClassificationName))])]),a._v(" "),e("li",[e("span",[a._v("检查医师 ：")]),e("span",[a._v(a._s(t.doctorName))])])])])]),a._v(" "),e("div",{staticClass:" table-four"},[e("el-button",{directives:[{name:"show",rawName:"v-show",value:a.past,expression:"past"}],attrs:{type:"mini"},on:{click:function(e){a.historical(t.medicalId)}}},[a._v("处理历史")]),a._v(" "),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.sendBack,expression:"item.sendBack"}],attrs:{type:"mini"},on:{click:function(e){e.stopPropagation(),a.audit(t.examineData)}}},[a._v("被退回")]),a._v(" "),e("el-button",{directives:[{name:"show",rawName:"v-show",value:a.delData,expression:"delData"}],attrs:{type:"mini"},on:{click:function(e){a.del(t.medicalId)}}},[a._v("删除")]),a._v(" "),a.back?e("el-button",{attrs:{type:"mini"},on:{click:function(e){e.stopPropagation(),a.onBack(t.medicalId,t.status)}}},[a._v("退回")]):a._e(),a._v(" "),a.submit?e("el-button",{attrs:{type:"mini"},on:{click:function(e){e.stopPropagation(),a.onSubmit(t.medicalId)}}},[a._v("查看")]):a._e(),a._v(" "),a.edit?e("el-button",{attrs:{type:"mini"},on:{click:function(e){e.stopPropagation(),a.onEdit(t.medicalId,t.organName,t.organId)}}},[a._v("编辑")]):a._e()],1)])])}),a._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:a.pageShow,expression:"pageShow"}],staticClass:"pagation"},[e("el-pagination",{attrs:{layout:"prev, pager, next",total:a.totalAll,"page-size":5},on:{"current-change":a.pages}})],1)],2)},staticRenderFns:[]};var c=e("VU/8")(o,l,!1,function(a){e("JP62"),e("dUN3")},"data-v-5528edf2",null);t.default=c.exports},JP62:function(a,t){},dUN3:function(a,t){}});
//# sourceMappingURL=7.0df73ce8c8c364a7e950.js.map